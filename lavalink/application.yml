server:
  port: 2333
  address: 0.0.0.0
  # Performance optimization
  compression:
    enabled: true
    level: 6

lavalink:
  server:
    password: ${LAVALINK_PASSWORD:youshallnotpass}
    # Disable built-in YouTube source to use plugin
    sources:
      youtube: false
      soundcloud: true
      http: true
      local: false
      bandcamp: true
      vimeo: true
    filters:
      volume: true
      equalizer: true
      karaoke: true
      timescale: true
      tremolo: true
      vibrato: true
      rotation: true
      distortion: true
      channelMix: true
      lowPass: true
    # Enhanced performance settings for production
    bufferDurationMs: 400
    frameBufferDurationMs: 5000
    opusEncodingQuality: 10
    resamplingQuality: HIGH
    trackStuckThresholdMs: 10000
    useSeekGhosting: true
    playerUpdateInterval: 10
    youtubePlaylistLoadLimit: 50  # Reduced to save memory
    soundcloudSearchEnabled: true
    gc-warnings: true

    # Memory and CPU optimizations
    playerEventListenerBufferTimeout: 5000
    httpTimeout: 10000
    # Connection pool settings - optimized for search performance
    httpPoolSize: 32  # Doubled for better concurrent search handling
    httpMaxPendingRequests: 128  # Doubled to handle more concurrent searches

  # Plugin loading configuration
  plugins:
    - dependency: "dev.lavalink.youtube:youtube-plugin:1.15.0"
      repository: "https://maven.lavalink.dev/releases"
    - dependency: "com.github.topi314.lavasrc:lavasrc-plugin:4.8.1"
      repository: "https://maven.lavalink.dev/releases"
    - dependency: "com.github.topi314.lavasearch:lavasearch-plugin:1.0.0"
      repository: "https://maven.lavalink.dev/releases"
    - dependency: "com.github.topi314.sponsorblock:sponsorblock-plugin:3.0.1"
      repository: "https://maven.lavalink.dev/releases"
    - dependency: "com.github.topi314.lavalyrics:lavalyrics-plugin:1.1.0"
      repository: "https://maven.lavalink.dev/releases"

# Plugin-specific configuration
plugins:
  youtube:
    enabled: true
    allowSearch: true
    allowDirectVideoIds: true
    allowDirectPlaylistIds: true
    # Optimized client order for maximum compatibility and bypass capabilities
    clients:
      - MUSIC
      - ANDROID_VR
      - WEB
      - WEBEMBEDDED
      # - TV_EMBEDDED  # Disabled: Failed to resolve TV_EMBEDDED into a Client
    clientOptions:
      # YouTube Music client - best for music content and restricted videos
      MUSIC:
        playback: true
        videoLoading: true
        playlistLoading: true
        searching: true
      # Android VR client - good for bypassing restrictions  
      ANDROID_VR:
        playback: true
        videoLoading: true
        playlistLoading: true
        searching: true
      # Web client - standard fallback
      WEB:
        playback: true
        videoLoading: true
        playlistLoading: true
        searching: true
      # Web embedded - often bypasses restrictions
      WEBEMBEDDED:
        playback: true
        videoLoading: true
        playlistLoading: true
        searching: true
      # TV embedded - additional bypass option (disabled due to resolution issues)
      # TV_EMBEDDED:
      #   playback: true
      #   videoLoading: true
      #   playlistLoading: false
      #   searching: false
    # Additional performance settings - optimized for search speed
    playlistLoadLimit: 50  # Reduced to prioritize search speed over large playlist loading
    videoLoadLimit: 25     # Reduced for faster individual video loading
    maxRetryAttempts: 2    # Reduced from 3 to 2 for faster fallback
    retryDelayMs: 500      # Reduced from 1000ms to 500ms for faster retries
    # Enhanced token management for better reliability
    oauth:
      enabled: false
      refreshToken: ${YOUTUBE_REFRESH_TOKEN:}
    # Proof of Origin Token for enhanced compatibility (v1.15.0 format)
    pot:
      token: ${YOUTUBE_PO_TOKEN:}
      visitorData: ${YOUTUBE_VISITOR_DATA:}
  lavasrc:
    # Enhanced providers with YouTube Music prioritization
    providers:
      - "ytmsearch:\"%ISRC%\""
      - "ytsearch:\"%ISRC%\""
      - "ytmsearch:%QUERY%"
      - "ytsearch:%QUERY%"

    # Enable multiple music sources for better track availability
    sources:
      spotify: true
      deezer: false
      applemusic: false
      youtube: true
      jiosaavn: false
      yandexmusic: false

    # Music platform configurations
    spotify:
      clientId: ${SPOTIFY_CLIENT_ID:}
      clientSecret: ${SPOTIFY_CLIENT_SECRET:}
      countryCode: "US"
      resolveArtistsInSearch: true
      playlistLoadLimit: 100
      albumLoadLimit: 100
    
    # YouTube Music specific configuration
    youtube:
      countryCode: "US"
    
  
  lavasearch:
    sources:
      youtube: true
      spotify: true
      deezer: false

  sponsorblock:
    enabled: true
    categories:
      - sponsor
      - selfpromo
      - interaction
      - intro
      - outro
      - preview
      - music_offtopic
      - filler

  lavalyrics:
    sources:
      spotify: true
      deezer: true
      youtube: true
      genius: true
      musixmatch: true
      lrclib: true
      tekstowo: true
      azlyrics: true

logging:
  level:
    root: INFO
    lavalink: DEBUG
